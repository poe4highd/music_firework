# DEV_LOG - 2026-02-14

## 任务：实现音符发光体动态效果与频率分布优化

### 1. 需求背景
- 用户希望“烟火”由具体的音符形状（♩, ♪, ♫）组成，并带有上升烟雾散去的效果。
- 修正目前频谱分布偏左的问题（草地总是左边亮），使其更符合钢琴 88 键的音高分布。

### 3. 工作回顾
1.  **频谱分布修正**：放弃了旧有的线性映射逻辑，改用基于 **对数尺度 (Logarithmic Scale)** 的分布算法（范围锁定在钢琴核心频段 20Hz-5000Hz）。这确保了低频能量不再挤占左侧空间，使音符冒出的位置能够精准覆盖到钢琴键的 **中段和右侧**。
2.  **音符粒子系统**：实现了 `NoteParticle` 功能。当音符响起时，会从对应的钢琴键位置随机弹出 ♩, ♪, ♫ 等音符发光体。
3.  **烟雾弥散效果**：新增 `SmokeParticle`。音符上升过程中会伴随产生淡淡的烟雾，呈现“飘飘然”的质感。
4.  **物理模拟精调**：增加了音符粒子的随机旋转和飘动物理，整体画面分布更加均衡。

---
