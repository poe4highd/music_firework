# DEV_LOG - 2026-02-13

## 任务：升级 Node.js 并新增“烟火”动态效果

### 1. 需求背景
- Vite 要求更高版本的 Node.js（当前 21.7.3，需 20.19+ 或 22.12+）。
- 音乐可视化系统需要增加“烟火”版：草地背景、钢琴键水平线、随乐符冒出的光效。

### 2. 环境升级
- [x] 升级 Node.js 至 v22.22.0 (via nvm)

### 3. 功能开发
#### 回顾项
1. **Node 升级**：已成功切换至 v22.22.0，解决了 Vite 兼容性警告。
2. **双模式支持**：重命名原有可视化为 `Universe`，新增 `Firework` 模式。
3. **渲染器实现**：`FireworkEngine` 实现了草地、钢琴键及喷泉烟火逻辑。
4. **UI 切换**：在 `Controls.tsx` 增加了版本切换 Tab。
6. **交互精调**：
    - **草地对齐**：草地绘制现在按钢琴键宽度进行物理分段，确保视觉重心完全一致。
    - **联动触发**：火花喷发点精确锁定在对应音符琴键的水平中心点。
    - **动态亮度**：草地颜色会随对应键位的频率强度实时闪烁，增强沉浸感。

---
